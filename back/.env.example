# Server
PORT=8080

# GCP / Firestore
GCP_PROJECT_ID=your-gcp-project-id
FIRESTORE_DB=(default)

# Cloud Storage
BUCKET_NAME=your-gcs-bucket-name
SIGNED_URL_TTL_SECONDS=900

# Cloud Tasks
TASK_QUEUE_NAME=analysis-queue
TASK_LOCATION=us-central1
TASKS_TARGET_URL=https://your-api-domain
TASK_SERVICE_ACCOUNT_EMAIL=your-cloud-tasks-sa@your-gcp-project-id.iam.gserviceaccount.com
# Dispatch mode:
# - in_process: local development (no Cloud Tasks queue required)
# - cloud_tasks: production queue dispatch
TASKS_DISPATCH_MODE=in_process

# Vertex AI
# If unset, GCP_PROJECT_ID is used.
VERTEX_PROJECT_ID=
VERTEX_LOCATION=us-central1
VERTEX_MODEL=gemini-2.5-pro
# If the primary model is unavailable, retries with this list (comma separated).
# Example: gemini-2.5-flash,gemini-2.0-flash-lite
# If empty, built-in fallback chain is used.
VERTEX_FALLBACK_MODELS=
# Optional override for claim extraction stage only.
VERTEX_CLAIM_MODEL=
VERTEX_TIMEOUT_MS=20000
VERTEX_MAX_RETRIES=2
VERTEX_RETRY_DELAY_MS=300
VERTEX_TEMPERATURE=0.2

# PDF extraction fallback (heavier path via Vertex multimodal OCR)
PDF_MULTI_SOURCE_ENABLED=1
PDF_VERTEX_FALLBACK_ENABLED=1
PDF_VERTEX_FALLBACK_MIN_PARAGRAPHS=4
PDF_VERTEX_FALLBACK_MIN_TEXT_ITEMS=40
PDF_VERTEX_MAX_BYTES=12582912
PDF_VERTEX_MAX_PARAGRAPHS=240
PDF_VERTEX_TIMEOUT_MS=120000
PDF_VERTEX_MAX_RETRIES=1
PDF_VERTEX_RETRY_DELAY_MS=600
# Optional override. If empty, VERTEX_MODEL is reused.
PDF_VERTEX_MODEL=

# Document AI (recommended primary OCR/layout)
DOC_AI_ENABLED=1
# Required when DOC_AI_ENABLED=1. Leave empty only if DOC_AI_ENABLED=0.
# Example:
# projects/<project-id>/locations/<location>/processors/<processor-id>
DOC_AI_PROCESSOR_NAME=
DOC_AI_TIMEOUT_MS=120000
DOC_AI_MAX_BYTES=10485760

# GROBID (recommended for citations/structure)
GROBID_ENABLED=1
GROBID_URL=http://127.0.0.1:8070
GROBID_TIMEOUT_MS=120000
GROBID_MAX_BYTES=26214400

# Docling (optional heavy fallback)
DOCLING_ENABLED=0
DOCLING_EXTRACT_URL=
DOCLING_TIMEOUT_MS=180000
DOCLING_MAX_BYTES=26214400

# Analysis tuning
ANALYSIS_MIN_PARAGRAPHS=8
ANALYSIS_MIN_TOTAL_CHARS=2500
# Per artifact quality thresholds (optional override)
ANALYSIS_MIN_PARAGRAPHS_PAPER=8
ANALYSIS_MIN_TOTAL_CHARS_PAPER=2500
ANALYSIS_MIN_PARAGRAPHS_PR=6
ANALYSIS_MIN_TOTAL_CHARS_PR=900
ANALYSIS_MIN_PARAGRAPHS_DOC=6
ANALYSIS_MIN_TOTAL_CHARS_DOC=1200
ANALYSIS_MIN_PARAGRAPHS_SHEET=6
ANALYSIS_MIN_TOTAL_CHARS_SHEET=700
ANALYSIS_MAX_CLAIMS=36
ANALYSIS_FALLBACK_MIN_CLAIMS=12
ANALYSIS_LLM_SEGMENT_MAX_PARAGRAPHS=120
ANALYSIS_LLM_SEGMENT_OVERLAP=24
ANALYSIS_LLM_MAX_SEGMENTS=6
ANALYSIS_CLAIM_REFINER_MAX_ITER=2
ANALYSIS_CLAIM_PROMPT_PARAGRAPH_MAX_CHARS=1200
ANALYSIS_TOP_RISKS_MAX=50

# Artifact text ingest limits
ARTIFACT_MIN_CHARS=40
ARTIFACT_MAX_CHARS=200000
ARTIFACT_MAX_TITLE_CHARS=120

# Auth for local run (recommended)
# Path to service account JSON key file.
GOOGLE_APPLICATION_CREDENTIALS=/absolute/path/to/service-account.json
